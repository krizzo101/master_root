# Production API Configuration
api:
  host: "0.0.0.0"
  port: 8000
  workers: 4
  reload: false
  access_log: true
  log_level: "info"

# Database Configuration
database:
  neo4j:
    uri: "bolt://autonomous-factory-neo4j:7687"
    user: "neo4j"
    password: "${NEO4J_PASSWORD}"
    max_connection_pool_size: 50
    connection_timeout: 30
    max_transaction_retry_time: 15
    encrypted: true

# Redis Configuration
redis:
  url: "redis://autonomous-factory-redis:6379"
  password: "${REDIS_PASSWORD}"
  db: 0
  max_connections: 20
  socket_timeout: 5
  socket_connect_timeout: 5
  retry_on_timeout: true

# Celery Configuration
celery:
  broker_url: "redis://autonomous-factory-redis:6379/1"
  result_backend: "redis://autonomous-factory-redis:6379/2"
  task_serializer: "json"
  accept_content: ["json"]
  result_serializer: "json"
  timezone: "UTC"
  enable_utc: true
  task_track_started: true
  task_time_limit: 30 * 60  # 30 minutes
  task_soft_time_limit: 25 * 60  # 25 minutes
  worker_prefetch_multiplier: 1
  worker_max_tasks_per_child: 1000

# Logging Configuration
logging:
  level: "INFO"
  format: "json"
  enable_file: true
  log_file: "/app/logs/app.log"
  enable_audit_log: true
  audit_log_file: "/app/logs/audit.log"
  enable_security_log: true
  security_log_file: "/app/logs/security.log"
  max_file_size: "100MB"
  backup_count: 5

# Monitoring Configuration
monitoring:
  prometheus_enabled: true
  metrics_enabled: true
  health_check_interval: 30
  system_metrics_interval: 15

# Security Configuration
security:
  require_auth: true
  jwt_secret_key: "${JWT_SECRET_KEY}"
  jwt_algorithm: "HS256"
  jwt_expiration_hours: 24
  jwt_refresh_expiration_hours: 168  # 7 days
  cors_origins: ["https://api.autonomous-factory.com"]
  rate_limit_enabled: true
  rate_limit_requests: 100
  rate_limit_window: 60  # seconds

# Performance Configuration
performance:
  max_request_size: "50MB"
  request_timeout: 300  # seconds
  keep_alive_timeout: 65
  max_connections: 1000
  connection_timeout: 60

# Feature Flags
features:
  evidence_graph_enabled: true
  task_execution_enabled: true
  monitoring_enabled: true
  audit_logging_enabled: true
  rate_limiting_enabled: true
  health_checks_enabled: true

# Cache Configuration
cache:
  enabled: true
  ttl: 3600  # 1 hour
  max_size: 1000
  eviction_policy: "lru"

# Task Configuration
tasks:
  default_timeout: 1800  # 30 minutes
  max_retries: 3
  retry_delay: 60  # seconds
  priority_levels: ["low", "normal", "high", "critical"]
  queue_names:
    default: "default"
    high_priority: "high-priority"
    low_priority: "low-priority"