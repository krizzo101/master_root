# CONDUCT AGENT-LED RETROSPECTIVE WORKFLOW

expectation: retrospective_generated_and_saved_in_standard_format
completion: retrospective_file_created_and_committed

directives:
  - "This workflow must be followed exactly. Do not skip or improvise steps."
  - "The agent must operate in fully autonomous, persistent mode."
  - "All outputs must follow retrospective documentation standards and be saved in /home/opsvi/agent_world/docs/applications/ACCF/coordination/."
  - "Validate all operations and document every major phase or release."

references:
  Profile: .cursor/profiles/conduct_agent_led_retrospective_agent_profile.yml
  Output_Template: .cursor/templates/conduct_agent_led_retrospective_output_template.yml
  Standards: [https://www.smartsheet.com/content/agile-sprint-scrum-retrospective-templates]

phases:
  profile_initialization:
    description: "Load the agent profile, perform a time check, and load foundational rules."
    tools: [read_file, fetch_rules, mcp_time_current_time]
    steps:
      - tool: mcp_time_current_time
        validation: time_checked
      - tool: read_file
        params:
          target_file: .cursor/profiles/conduct_agent_led_retrospective_agent_profile.yml
        validation: agent_profile_loaded
      - tool: fetch_rules
        params:
          rule_names:
            - "002-tool-usage-and-optimize"
            - "200-project-design-and-dev-process"
            - "501-tool-operation-validation"
            - "300-documentation-standards"
        validation: foundational_rules_loaded
    gates: [time_checked, agent_profile_loaded, foundational_rules_loaded]

  intake:
    description: "Capture the completed milestone, feature, or sprint and intended output filename."
    tools: [prompt_user]
    steps:
      - intention_analysis → retrospective_request → retrospective_context_identified
      - context_capture → filename_analysis → retrospective_filename_confirmed
    gates: [retrospective_context_identified, retrospective_filename_confirmed]

  input_validation:
    description: "Validate the completed milestone/feature/sprint and filename."
    tools: [prompt_user]
    steps:
      - validate_context_completeness → context_validated
      - validate_filename_format → filename_validated
    gates: [context_validated, filename_validated]

  retrospective_generation:
    description: "Generate the structured retrospective document using the output template."
    tools: [edit_file, read_file]
    steps:
      - tool: read_file
        params:
          target_file: .cursor/templates/conduct_agent_led_retrospective_output_template.yml
        validation: output_template_loaded
      - populate_template_with_context → retrospective_draft_created
      - tool: edit_file
        params:
          target_file: /home/opsvi/agent_world/docs/applications/ACCF/coordination/[retrospective_filename].md
          code_edit: generated_retrospective_content
        validation: retrospective_file_created
    gates: [output_template_loaded, retrospective_draft_created, retrospective_file_created]

  review:
    description: "Review the generated retrospective for completeness, standards compliance, and accuracy."
    tools: [read_file, fetch_rules]
    steps:
      - tool: read_file
        params:
          target_file: /home/opsvi/agent_world/docs/applications/ACCF/coordination/[retrospective_filename].md
        validation: retrospective_reviewed
      - checklist_review:
          - standard_format
          - required_sections_present
          - actionable_lessons_and_actions
          - follow_up_items
        validation: compliance_confirmed
    gates: [retrospective_reviewed, compliance_confirmed]

  linting:
    description: "Lint and auto-fix the retrospective markdown file."
    tools: [run_terminal_cmd]
    steps:
      - tool: run_terminal_cmd
        params:
          command: "markdownlint-cli2 --fix /home/opsvi/agent_world/docs/applications/ACCF/coordination/[retrospective_filename].md"
          is_background: false
        validation: linting_passed
    gates: [linting_passed]

  documentation:
    description: "Document the workflow execution and commit the retrospective."
    tools: [edit_file, run_terminal_cmd]
    steps:
      - tool: edit_file
        params:
          target_file: docs/applications/ACCF/standards/conduct_agent_led_retrospective_workflow.md
          code_edit: generated_workflow_documentation
        validation: workflow_doc_created
      - tool: run_terminal_cmd
        params:
          command: "git add . && git commit -m 'Add/update retrospective: [retrospective_filename]'"
          is_background: false
        validation: git_commit_successful
    gates: [workflow_doc_created, git_commit_successful]
