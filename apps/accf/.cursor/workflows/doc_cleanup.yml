# Documentation Cleanup Workflow

workflow_name: doc_cleanup
agent_profile: .cursor/profiles/doc_cleanup_agent_profile.yml
output_template: .cursor/templates/doc_cleanup_output_template.yml

description: |
  This workflow automates the audit, triage, and cleanup of Markdown documentation and code artifacts. It is managed and executed by agents, leverages existing tools, and ensures all actions are standards-compliant, logged, and reproducible.

phases:
  inventory:
    description: "Scan and index all Markdown docs and code files, extract metadata, and store in ArangoDB."
    steps:
      - scan_docs_and_code
      - extract_metadata
      - store_metadata_arangodb
    gates:
      - docs_and_code_indexed
      - metadata_stored

  analysis_flagging:
    description: "Analyze code-doc relationships, flag orphans, staleness, incompleteness, and unused/deprecated code."
    steps:
      - run_static_analysis_tools
      - match_code_to_docs
      - flag_issues
      - update_flags_arangodb
    gates:
      - analysis_complete
      - flags_updated

  agent_review:
    description: "Agents review flagged items, suggest actions, and generate a comprehensive report."
    steps:
      - aggregate_flagged_items
      - suggest_actions
      - generate_report
      - update_report_arangodb
    gates:
      - report_generated
      - actions_suggested

  human_review:
    description: "Present flagged items and agent suggestions in a dashboard or checklist for human approval."
    steps:
      - present_review_interface
      - collect_reviewer_decisions
      - update_decisions_arangodb
    gates:
      - review_complete
      - decisions_recorded

  archiving_purging:
    description: "Execute approved actions: archive, delete, or purge files/code, and log all actions."
    steps:
      - execute_approved_actions
      - log_actions_arangodb
      - update_status_arangodb
    gates:
      - actions_executed
      - status_updated

  final_summary:
    description: "Generate a final summary report confirming all flagged issues are resolved and the documentation/codebase are in sync."
    steps:
      - check_unresolved_flags
      - generate_final_report
      - archive_final_report
    gates:
      - success_confirmed
      - final_report_archived

validation:
  - All phases and steps must complete without error.
  - All outputs must be generated and validated per the output template.
  - All actions must be logged and standards-compliant.
  - Final report must confirm all issues are resolved and code/docs are in sync.

references:
  - src/applications/doc_cleanup/requirements/cleanup_requirements.md
  - src/applications/doc_cleanup/design/cleanup_workflow.md
