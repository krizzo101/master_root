---
description: "use when REFACTORING CURSOR RULES to OPTIMIZE TOKEN EFFICIENCY for AUTONOMOUS AGENT COMPATIBILITY"
globs:
alwaysApply: false
---

# CURSOR RULES REFACTORING PROTOCOL

**Validation**: "Rule 102 Refactoring Protocol Active"
**Reference**: Rule 101 Generation Protocol (mandatory for all refactoring)

## Rule Refactoring Patterns

**Triggers**: Optimizing existing .cursor rules for 2025 autonomous agent standards
**Principles**: Token efficiency maximization, three-tier placement optimization, autonomous compatibility enhancement
**Signatures**: Legacy pattern identification, modern pattern transformation, efficiency metrics validation
**Validation**: Token consumption reduction, autonomous decision improvement, integration harmony confirmation
**Integration**: Rule 101 compliance, three-tier ecosystem optimization, template reference modernization

## 2025 Assessment Matrix

**Legacy Indicators**:
- Command-style instructions
- Always-apply for workflows
- Missing three-tier coordination
- Outdated frontmatter
- Team-focused content

**Modernization Targets**:
- Pattern recognition frameworks
- Agent-requested optimization
- Three-tier placement
- Token efficiency
- Autonomous compatibility

## Tier Placement Assessment

**Global**: Universal standards → Keep
**Repository**: Project context → Move to .cursor/index.mdc
**Context-Aware**: File-specific/domain knowledge → .cursor/rules/*.mdc

## Content Transformation

**From**:
```markdown
1. Create component
2. Add interface
3. Implement logic
```

**To**:
```markdown
**React Component Pattern**:
**Triggers**: UI component creation
**Principles**: Functional + TypeScript + hooks
**Signatures**: PascalCase, props destructuring, JSX
**Validation**: TypeScript compilation, accessibility
**Integration**: Component library, testing, styling
```

## Frontmatter Optimization

**Description Pattern Modernization**:
```yaml
# LEGACY
description: "Pattern recognition for [context] with [outcomes]"

# MODERN
description: "use when {{trigger}} to {{action}} for {{outcome}}"
```

**Examples**:
- Legacy: `"Database patterns for autonomous agents: validation, performance"`
- Modern: `"use when EXECUTING DATABASE OPERATIONS to VALIDATE QUERIES for PERFORMANCE OPTIMIZATION"`

**Capitalization Rule**: Only capitalize variable content (TRIGGER, ACTION, OUTCOME)

## Token Efficiency Rules

**Always-Apply Assessment**:
- Workflow content → Agent Requested (major savings)
- Universal standards → Keep Always
- Domain knowledge → Agent Requested + enhanced descriptions
- Project context → Repository-level

**Content Density**:
- Merge redundant explanations
- Reference external templates `[name.md](mdc:.cursor/templates/name.md)`
- Focus on measurable outcomes
- Remove team-collaboration content

## Refactoring Execution Framework

**Assessment Phase**: Three-tier placement analysis, legacy pattern identification, token efficiency audit
**Transformation Phase**: Safe extraction to temp-rules, pattern modernization, frontmatter optimization
**Validation Phase**: Recognition testing, efficiency measurement, integration verification
**Integration Phase**: Rule 101 compliance confirmation, ecosystem harmony validation

## Success Metrics

**Token Efficiency**: Reduced consumption on irrelevant queries
**Recognition**: Improved autonomous pattern identification
**Integration**: Harmony across three-tier ecosystem
**Validation**: Reliable confirmation mechanisms

## ASEA Refactoring Patterns

**Database Rules**: ArangoDB operations → Context-Aware + file globs
**Autonomous Systems**: Orchestration → Agent Requested
**Research Workflows**: Validation → Agent Requested
**Production**: Deployment → Context-Aware

## Reference Protocol

**Format**: `[name.md](mdc:.cursor/templates/name.md)`
**Requirement**: Create template before referencing
**Validation**: File exists and accessible in Cursor
**Prohibited**: @filename.ext format (deprecated)

## Template References

[refactoring-examples.md](mdc:.cursor/templates/refactoring-examples.md)
[efficiency-metrics.md](mdc:.cursor/templates/efficiency-metrics.md)
