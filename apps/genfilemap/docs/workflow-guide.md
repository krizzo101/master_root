##IntroductionThisguideprovidesadetailedexplanationoftheoperationalworkflowsinGenFileMap,fromcommandinvocationtofilemapgeneration.It'sdesignedtohelpyouunderstandhowthetoolprocessescommands,collectsandfiltersfiles,generatesfilemaps,andhandleserrors.Eachsectionincludesvisualdiagramstoillustratetheprocess.Understandingtheseworkflowsisvaluablefor:-Diagnosingissueswhenthetooldoesn'tbehaveasexpected-Contributingtothecodebaseorextendingitsfunctionality-Optimizingyourusageofthetoolindifferentscenarios-IntegratingGenFileMapwithothertoolsorprocesses##CommandProcessingFlowWhenyouruntheGenFileMapcommand,thefollowingsequenceofoperationsoccurs:1.**CommandInvocation**:Youinvokethecommandwitharguments2.**ArgumentParsing**:TheCLImoduleparsesyourcommand-linearguments3.**ConfigurationLoading**:Configurationisloadedfrommultiplesources4.**OperationModeSelection**:Thesystemdetermineswhichmodetorun(process,clean,projectmap)5.**CoreFunctionDispatch**:Theappropriatecorefunctioniscalled6.**ResultHandling**:Outputisdisplayedandanyreportsaregenerated###CommandProcessingDiagram```mermaid%%{init:{'theme':'dark','themeVariables':{'primaryColor':'#bb2528','primaryTextColor':'#fff','primaryBorderColor':'#7C0000','lineColor':'#F8B229','secondaryColor':'#006100','tertiaryColor':'#fff'}}}%%flowchartTDStart([CommandInvocation])-->ParseArgs[ParseCommand-lineArguments]ParseArgs-->CheckInit{InitConfig?}CheckInit-->|Yes|GenerateConfig[GenerateDefaultConfig]GenerateConfig-->Exit1([Exit])CheckInit-->|No|CheckPath{PathProvided?}CheckPath-->|No|GetFromConfig[TryGetPathfromConfig]GetFromConfig-->CheckPathAgain{PathFound?}CheckPathAgain-->|No|ShowError[DisplayErrorMessage]ShowError-->Exit2([Exit])CheckPath-->|Yes|LoadConfig[LoadConfiguration]CheckPathAgain-->|Yes|LoadConfigLoadConfig-->CheckClean{CleanMode?}CheckClean-->|Yes|RunClean[RunCleanOperation]RunClean-->GenerateReport[GenerateReport]GenerateReport-->Exit3([Exit])CheckClean-->|No|CheckProjectMap{ProjectMap?}CheckProjectMap-->|Yes|GenerateProjectMap[GenerateProjectMap]CheckProjectMap-->|No|SkipProjectMap[SkipProjectMapGeneration]GenerateProjectMap-->ProcessFiles[ProcessFiles]SkipProjectMap-->ProcessFilesProcessFiles-->GenerateReport2[GenerateReport]GenerateReport2-->Exit4([Exit])classDefbluefill:#3498db,stroke:#2980b9,color:#fffclassDefgreenfill:#006100,stroke:#004d00,color:#fffclassDefredfill:#bb2528,stroke:#7C0000,color:#fffclassDefyellowfill:#F8B229,stroke:#d9a331,color:#000classDefgrayfill:#444,stroke:#222,color:#fffclassStart,Exit1,Exit2,Exit3,Exit4grayclassParseArgs,LoadConfigblueclassCheckInit,CheckPath,CheckPathAgain,CheckClean,CheckProjectMapyellowclassGenerateConfig,RunClean,GenerateProjectMap,ProcessFilesgreenclassShowErrorredclassGetFromConfig,SkipProjectMap,GenerateReport,GenerateReport2blue```##FileCollectionandFilteringThefilecollectionandfilteringprocessdetermineswhichfileswillbeprocessedbyGenFileMap.Thisprocessinvolvesseveralsteps:1.**PathResolution**:Determineifthespecifiedpathisafileordirectory2.**RecursionHandling**:Ifpathisadirectoryandrecursionisenabled,walkthroughallsubdirectories3.**ExtensionFiltering**:Includeorexcludefilesbasedontheirextensions4.**IgnorePatternApplication**:Skipfilesmatchingpatternsintheignorefile5.**MinimumLineChecking**:Filterfilesthatdon'tmeettheminimumlinecountrequirement###FileCollectionDiagram```mermaid%%{init:{'theme':'dark','themeVariables':{'primaryColor':'#bb2528','primaryTextColor':'#fff','primaryBorderColor':'#7C0000','lineColor':'#F8B229','secondaryColor':'#006100','tertiaryColor':'#fff'}}}%%flowchartTDStart([BeginCollection])-->CheckPath{PathisFile?}CheckPath-->|Yes|SingleFile[ProcessSingleFile]SingleFile-->CheckIgnoreSingle{MatchesIgnorePattern?}CheckIgnoreSingle-->|Yes|SkipSingle[SkipFile]CheckIgnoreSingle-->|No|CheckMinLinesSingle{MeetsMinLines?}CheckMinLinesSingle-->|No|SkipLinesTooShort[Skip-TooFewLines]CheckMinLinesSingle-->|Yes|AddToList1[AddtoFilesList]CheckPath-->|No|CheckRecursive{RecursiveMode?}CheckRecursive-->|Yes|WalkDir[WalkDirectoryTree]CheckRecursive-->|No|ListDir[ListDirectoryContents]WalkDir-->FileLoop1[ForEachFile]ListDir-->FileLoop2[ForEachFile]FileLoop1-->CheckIgnore1{MatchesIgnorePattern?}FileLoop2-->CheckIgnore2{MatchesIgnorePattern?}CheckIgnore1-->|Yes|Skip1[SkipFile]CheckIgnore1-->|No|CheckInclude1{ExtensioninIncludeList?}CheckIgnore2-->|Yes|Skip2[SkipFile]CheckIgnore2-->|No|CheckInclude2{ExtensioninIncludeList?}CheckInclude1-->|No,butIncludeListExists|Skip3[SkipFile]CheckInclude1-->|YesorNoIncludeList|CheckExclude1{ExtensioninExcludeList?}CheckInclude2-->|No,butIncludeListExists|Skip4[SkipFile]CheckInclude2-->|YesorNoIncludeList|CheckExclude2{ExtensioninExcludeList?}CheckExclude1-->|Yes|Skip5[SkipFile]CheckExclude1-->|No|CheckMinLines1{MeetsMinLines?}CheckExclude2-->|Yes|Skip6[SkipFile]CheckExclude2-->|No|CheckMinLines2{MeetsMinLines?}CheckMinLines1-->|No|SkipTooShort1[Skip-TooFewLines]CheckMinLines1-->|Yes|AddToList2[AddtoFilesList]CheckMinLines2-->|No|SkipTooShort2[Skip-TooFewLines]CheckMinLines2-->|Yes|AddToList3[AddtoFilesList]AddToList1-->Done([CompleteCollection])SkipSingle-->DoneSkipLinesTooShort-->DoneSkip1-->NextFile1[NextFile]Skip3-->NextFile1Skip5-->NextFile1SkipTooShort1-->NextFile1AddToList2-->NextFile1NextFile1-.->FileLoop1Skip2-->NextFile2[NextFile]Skip4-->NextFile2Skip6-->NextFile2SkipTooShort2-->NextFile2AddToList3-->NextFile2NextFile2-.->FileLoop2classDefbluefill:#3498db,stroke:#2980b9,color:#fffclassDefgreenfill:#006100,stroke:#004d00,color:#fffclassDefredfill:#bb2528,stroke:#7C0000,color:#fffclassDefyellowfill:#F8B229,stroke:#d9a331,color:#000classDefgrayfill:#444,stroke:#222,color:#fffclassStart,Done,NextFile1,NextFile2grayclassCheckPath,CheckIgnoreSingle,CheckMinLinesSingle,CheckRecursiveyellowclassCheckIgnore1,CheckIgnore2,CheckInclude1,CheckInclude2,CheckExclude1,CheckExclude2,CheckMinLines1,CheckMinLines2yellowclassSingleFile,WalkDir,ListDir,FileLoop1,FileLoop2,AddToList1,AddToList2,AddToList3greenclassSkipSingle,Skip1,Skip2,Skip3,Skip4,Skip5,Skip6,SkipLinesTooShort,SkipTooShort1,SkipTooShort2red```##FileMapGenerationProcessOnceafilehasbeenselectedforprocessing,thefollowingstepsoccurtogenerateafilemap:1.**FileReading**:Thefilecontentisread2.**CommentStyleDetection**:Theappropriatecommentstyleisdeterminedbasedonfiletype3.**ProcessorSelection**:Theappropriatefileprocessorisselectedbasedonfiletype4.**ExistingMapExtraction**:Anyexistingfilemapisextracted5.**ContentHashCalculation**:Ahashiscalculatedtodetectcontentchangessincelastprocessing6.**FileAnalysis**:Thefile'sstructureisanalyzedtoidentifysectionsandkeyelements7.**LLMPromptConstruction**:Apromptisconstructedforthelanguagemodel8.**MapGeneration**:ThelanguagemodelgeneratesafilemapJSON9.**MapValidation**:Thegeneratedmapisvalidatedforcorrectness10.**MapFormatting**:Themapisformattedwithappropriatecomments11.**FileUpdate**:Thefileisupdatedwiththenewfilemap###FileMapGenerationDiagram```mermaid%%{init:{'theme':'dark','themeVariables':{'primaryColor':'#bb2528','primaryTextColor':'#fff','primaryBorderColor':'#7C0000','lineColor':'#F8B229','secondaryColor':'#006100','tertiaryColor':'#fff'}}}%%flowchartTDStart([StartGeneration])ReadFile[ReadFileContent]DetectComment[DetectCommentStyle]SelectProcessor[SelectFileProcessor]ExtractMap[ExtractExistingMap]CalcHash[CalculateContentHash]CheckHashFile{HashFileExists?}LoadOldHash[LoadOldHash]CompareHash{ContentChanged?}ForceCheck{ForceRegeneration?}SkipGen[SkipGeneration-NoChanges]AnalyzeFile[AnalyzeFileStructure]ComplexCheck{FileTooComplex?}SimplifyAnalysis[SimplifyAnalysis]BuildBasicInfo[BuildBasicInfoObject]ConstructPrompt[ConstructLLMPrompt]CallLLM[CallLanguageModel]ParseResponse[ParseJSONResponse]ValidateMap[ValidateGeneratedMap]ValidationResult{ValidationOK?}RetryCheck{MaxRetriesReached?}AdjustPrompt[AdjustPromptandInstructions]FormatMap[FormatMapwithComments]UpdateFile[UpdateFilewithNewMap]End([EndGeneration])Start-->ReadFileReadFile-->DetectCommentDetectComment-->SelectProcessorSelectProcessor-->ExtractMapExtractMap-->CalcHashCalcHash-->CheckHashFileCheckHashFile-->|Yes|LoadOldHashCheckHashFile-->|No|AnalyzeFileLoadOldHash-->CompareHashCompareHash-->|NoChange|ForceCheckCompareHash-->|Changed|AnalyzeFileForceCheck-->|Yes|AnalyzeFileForceCheck-->|No|SkipGenSkipGen-->EndAnalyzeFile-->ComplexCheckComplexCheck-->|Yes|SimplifyAnalysisComplexCheck-->|No|BuildBasicInfoSimplifyAnalysis-->BuildBasicInfoBuildBasicInfo-->ConstructPromptConstructPrompt-->CallLLMCallLLM-->ParseResponseParseResponse-->ValidateMapValidateMap-->ValidationResultValidationResult-->|No|RetryCheckValidationResult-->|Yes|FormatMapRetryCheck-->|No|AdjustPromptRetryCheck-->|Yes|EndAdjustPrompt-->CallLLMFormatMap-->UpdateFileUpdateFile-->EndclassDefbluefill:#3498db,stroke:#2980b9,color:#fffclassDefgreenfill:#006100,stroke:#004d00,color:#fffclassDefredfill:#bb2528,stroke:#7C0000,color:#fffclassDefyellowfill:#F8B229,stroke:#d9a331,color:#000classDefgrayfill:#444,stroke:#222,color:#fffclassStart,EndgrayclassReadFile,DetectComment,SelectProcessor,ExtractMap,CalcHash,LoadOldHashblueclassCheckHashFile,CompareHash,ForceCheck,ComplexCheck,ValidationResult,RetryCheckyellowclassAnalyzeFile,SimplifyAnalysis,BuildBasicInfo,ConstructPrompt,CallLLM,ParseResponse,ValidateMap,FormatMapgreenclassSkipGen,AdjustPrompt,UpdateFilered```##ConcurrentProcessingModelGenFileMapprocessesmultiplefilesconcurrentlytoimproveperformance.Theconcurrencymodelworksasfollows:1.**SemaphoreCreation**:Asemaphoreiscreatedtolimitconcurrencytotheconfiguredlevel2.**TaskCreation**:Asynchronoustasksarecreatedforeachfile3.**ConcurrentExecution**:Tasksareexecutedinparalleluptothesemaphorelimit4.**ResultCollection**:Resultsarecollectedastaskscomplete5.**TaskCompletion**:Alltasksareawaitedbeforegeneratingthefinalreport###ConcurrentProcessingDiagram```mermaid%%{init:{'theme':'dark','themeVariables':{'primaryColor':'#bb2528','primaryTextColor':'#fff','primaryBorderColor':'#7C0000','lineColor':'#F8B229','secondaryColor':'#006100','tertiaryColor':'#fff'}}}%%sequenceDiagramparticipantCoreparticipantSemaphoreparticipantTask1as"Task1"participantTask2as"Task2"participantTask3as"Task3"participantTask4as"Task4"participantTask5as"Task5"NoteoverCore:Createsemaphorewithlimit3Core->>Semaphore:Initialize(3)NoteoverCore:CreatetasksforallfilesCore->>Task1:CreateCore->>Task2:CreateCore->>Task3:CreateCore->>Task4:CreateCore->>Task5:CreateNoteoverCore,Semaphore:StartexecutionwithgatherTask1->>Semaphore:AcquireTask2->>Semaphore:AcquireTask3->>Semaphore:AcquireTask4->>Semaphore:Attemptacquire(blocks)NoteoverTask1,Semaphore:Tasks1-3runinparallelTask1->>Task1:ProcessfileTask2->>Task2:ProcessfileTask3->>Task3:ProcessfileNoteoverTask1,Semaphore:Task1completesTask1->>Semaphore:ReleaseNoteoverTask4,Semaphore:Task4acquiressemaphoreSemaphore->>Task4:AcquiregrantedTask4->>Task4:ProcessfileNoteoverTask2,Semaphore:Task2completesTask2->>Semaphore:ReleaseNoteoverTask5,Semaphore:Task5acquiressemaphoreSemaphore->>Task5:AcquiregrantedTask5->>Task5:ProcessfileNoteoverTask3,Semaphore:Task3completesTask3->>Semaphore:ReleaseNoteoverTask4,Semaphore:Task4completesTask4->>Semaphore:ReleaseNoteoverTask5,Semaphore:Task5completesTask5->>Semaphore:ReleaseNoteoverCore:AlltaskshavecompletedCore->>Core:Generatereport```##ConfigurationResolutionConfigurationsettingsareresolvedfrommultiplesourceswithaclearprecedenceorder.Thisprocessensuresflexibilitywhilemaintainingpredictablebehavior:1.**DefaultValues**:Built-indefaultsareloadedfirst2.**ConfigurationFile**:Valuesfromconfigurationfileoverridedefaults3.**EnvironmentVariables**:Environmentvariableswith`GENFILEMAP_`prefixoverridefileconfig4.**Command-lineArguments**:Command-lineargumentshavehighestprecedenceandoverrideeverythingelse###ConfigurationResolutionDiagram```mermaid%%{init:{'theme':'dark','themeVariables':{'primaryColor':'#bb2528','primaryTextColor':'#fff','primaryBorderColor':'#7C0000','lineColor':'#F8B229','secondaryColor':'#006100','tertiaryColor':'#fff'}}}%%flowchartLRsubgraph"DefaultFallbacks"DefaultMinLines["min_lines=50"]DefaultInclude["include_extensions=[.py,.js,...]"]DefaultConcurrency["concurrency=5"]endsubgraph"ConfigFile"FileMinLines["min_lines=25"]FileInclude["include_extensions=[.rs,.go,...]"]endsubgraph"EnvironmentVariables"EnvInclude["GENFILEMAP_FILE_PROCESSING_INCLUDE_EXTENSIONS=.tsx,.jsx"]endsubgraph"CommandLine"CLIMinLines["--min-lines100"]endsubgraph"ResolvedConfiguration"FinalMinLines["min_lines=100"]FinalInclude["include_extensions=[.tsx,.jsx]"]FinalConcurrency["concurrency=5"]endDefaultMinLines-->FileMinLinesFileMinLines-->FinalMinLinesCLIMinLines-->FinalMinLinesDefaultInclude-->FileIncludeFileInclude-->EnvIncludeEnvInclude-->FinalIncludeDefaultConcurrency-->FinalConcurrencyclassDefbluefill:#3498db,stroke:#2980b9,color:#fffclassDefgreenfill:#006100,stroke:#004d00,color:#fffclassDefredfill:#bb2528,stroke:#7C0000,color:#fffclassDefyellowfill:#F8B229,stroke:#d9a331,color:#000classDefgrayfill:#444,stroke:#222,color:#fffclassDefaultMinLines,DefaultInclude,DefaultConcurrencygrayclassFileMinLines,FileIncludeblueclassEnvIncludegreenclassCLIMinLinesredclassFinalMinLines,FinalInclude,FinalConcurrencyyellow```##ErrorHandlingandReportingGenFileMapemploysarobusterrorhandlingstrategytoensurethatfailuresinprocessingindividualfilesdon'tstoptheentireoperation.Thereportingsystemtrackssuccesses,failures,andskippedfiles:1.**Per-FileErrorHandling**:Eachfileisprocessedinatry-exceptblock2.**ReportingDataCollection**:Processingstatisticsarecollectedinacentraldatastructure3.**SummaryGeneration**:Asummaryreportisgeneratedafterallprocessingiscomplete4.**JSONReportOption**:AdetailedJSONreportcanbegeneratedformachineconsumption###ErrorHandlingDiagram```mermaid%%{init:{'theme':'dark','themeVariables':{'primaryColor':'#bb2528','primaryTextColor':'#fff','primaryBorderColor':'#7C0000','lineColor':'#F8B229','secondaryColor':'#006100','tertiaryColor':'#fff'}}}%%flowchartTDStart([StartProcessing])InitReport[InitializeReportData]ProcessLoop[ForEachFile]TryProcess[TryProcessFile]ProcessCheck{ProcessSuccessful?}ProcessError[CatchError]LogError[LogErrorinReport]CheckSkip{SkipCondition?}IncrementSkip[IncrementSkipped]IncrementProc[IncrementProcessed]NextFile[NextFile]AllProcessed{AllFilesProcessed?}GenerateReport[GenerateReportObject]CheckReportPath{ReportPathSet?}WriteJSONReport[WriteJSONReport]PrintSummary[PrintConsoleSummary]End([EndProcessing])Start-->InitReportInitReport-->ProcessLoopProcessLoop-->TryProcessTryProcess-->ProcessCheckProcessCheck-->|Error|ProcessErrorProcessCheck-->|Success|CheckSkipProcessError-->LogErrorLogError-->NextFileCheckSkip-->|Yes|IncrementSkipCheckSkip-->|No|IncrementProcIncrementSkip-->NextFileIncrementProc-->NextFileNextFile-->AllProcessedAllProcessed-->|No|ProcessLoopAllProcessed-->|Yes|GenerateReportGenerateReport-->CheckReportPathCheckReportPath-->|Yes|WriteJSONReportCheckReportPath-->|No|PrintSummaryWriteJSONReport-->PrintSummaryPrintSummary-->EndclassDefbluefill:#3498db,stroke:#2980b9,color:#fffclassDefgreenfill:#006100,stroke:#004d00,color:#fffclassDefredfill:#bb2528,stroke:#7C0000,color:#fffclassDefyellowfill:#F8B229,stroke:#d9a331,color:#000classDefgrayfill:#444,stroke:#222,color:#fffclassStart,EndgrayclassInitReport,GenerateReport,WriteJSONReport,PrintSummaryblueclassProcessLoop,TryProcess,NextFilegreenclassProcessCheck,CheckSkip,AllProcessed,CheckReportPathyellowclassProcessError,LogError,IncrementSkip,IncrementProcred```##ProjectMapGenerationTheprojectmapgenerationprocesscreatesaconsolidatedviewofallfilesinaprojectandtheirfilemaps:1.**PathResolution**:Determinetherootpathfortheproject2.**FileCollection**:Collectallfilesmatchingtheconfiguredcriteria3.**FileMapExtraction**:Extractexistingfilemapsfromeachfile4.**MarkdownGeneration**:Generateamarkdowndocumentwithlinkstoeachfileanditsfilemap5.**OutputWriting**:Writetheprojectmaptotheconfiguredoutputfile###ProjectMapGenerationDiagram```mermaid%%{init:{'theme':'dark','themeVariables':{'primaryColor':'#bb2528','primaryTextColor':'#fff','primaryBorderColor':'#7C0000','lineColor':'#F8B229','secondaryColor':'#006100','tertiaryColor':'#fff'}}}%%flowchartTDStart([StartProjectMap])ReadConfig[ReadConfigurationSettings]CheckDir{PathisDirectory?}ErrorExit[Error-NotaDirectory]InitLines[InitializeDocumentLines]WriteHeader[WriteProjectMapHeader]CheckRecursive{RecursiveMode?}WalkDir[WalkDirectoryTree]ListDir[ListDirectoryContents]ProcessFiles[ForEachFile]FilterFile{FilePassesFilters?}Skip[SkipFile]ReadFile[ReadFileContent]ExtractMap[ExtractExistingFileMap]CheckMapExists{FileMapExists?}AddMapEntry[AddFileEntryWithMap]AddNoMapEntry[AddFileEntryWithoutMap]JoinLines[JoinAllLines]WriteOutput[WritetoOutputFile]End([EndProjectMap])Start-->ReadConfigReadConfig-->CheckDirCheckDir-->|No|ErrorExitErrorExit-->EndCheckDir-->|Yes|InitLinesInitLines-->WriteHeaderWriteHeader-->CheckRecursiveCheckRecursive-->|Yes|WalkDirCheckRecursive-->|No|ListDirWalkDir-->ProcessFilesListDir-->ProcessFilesProcessFiles-->FilterFileFilterFile-->|No|SkipFilterFile-->|Yes|ReadFileSkip-->ProcessFilesReadFile-->ExtractMapExtractMap-->CheckMapExistsCheckMapExists-->|Yes|AddMapEntryCheckMapExists-->|No|AddNoMapEntryAddMapEntry-->ProcessFilesAddNoMapEntry-->ProcessFilesProcessFiles-->|AllProcessed|JoinLinesJoinLines-->WriteOutputWriteOutput-->EndclassDefbluefill:#3498db,stroke:#2980b9,color:#fffclassDefgreenfill:#006100,stroke:#004d00,color:#fffclassDefredfill:#bb2528,stroke:#7C0000,color:#fffclassDefyellowfill:#F8B229,stroke:#d9a331,color:#000classDefgrayfill:#444,stroke:#222,color:#fffclassStart,EndgrayclassReadConfig,InitLines,WriteHeader,JoinLines,WriteOutputblueclassCheckDir,CheckRecursive,FilterFile,CheckMapExistsyellowclassWalkDir,ListDir,ProcessFiles,ReadFile,ExtractMapgreenclassErrorExit,Skip,AddMapEntry,AddNoMapEntryred```##CleanOperationWorkflowThecleanoperationremovesfilemapsandtheirassociatedhashfilesfromacodebase:1.**PathResolution**:Determineifthepathisafileordirectory2.**FileCollection**:Collectallfilesmatchingtheconfiguredcriteria3.**FileMapRemoval**:Foreachfile,extractandremovethefilemap4.**HashFileRemoval**:Deletetheassociatedhashfileifitexists5.**ReportGeneration**:Generateareportofthecleaningoperation###CleanOperationDiagram```mermaid%%{init:{'theme':'dark','themeVariables':{'primaryColor':'#bb2528','primaryTextColor':'#fff','primaryBorderColor':'#7C0000','lineColor':'#F8B229','secondaryColor':'#006100','tertiaryColor':'#fff'}}}%%flowchartTDStart([StartClean])ReadConfig[ReadConfigurationSettings]CheckPath{PathExists?}ErrorPath[Error-PathNotFound]CheckFile{IsFile?}SingleFile[ProcessSingleFile]CollectFiles[CollectFiles]InitCounters[InitializeCounters]CreateTasks[CreateCleanTasks]ProcessConcurrent[ProcessConcurrently]GatherResults[GatherResults]ProcessFile[CleanSingleFile]ReadFileContent[ReadFileContent]CheckHasMap{HasFileMap?}SkipNoMap[Skip-NoMapFound]RemoveMap[RemoveFileMap]GetHashFile[GetHashFilePath]CheckHashExists{HashFileExists?}RemoveHash[DeleteHashFile]UpdateContent{ContentChanged?}WriteCleaned[WriteCleanedContent]UpdateCounters[UpdateCounters]GenerateReport[GenerateCleanReport]End([EndClean])Start-->ReadConfigReadConfig-->CheckPathCheckPath-->|No|ErrorPathErrorPath-->EndCheckPath-->|Yes|CheckFileCheckFile-->|Yes|SingleFileCheckFile-->|No|CollectFilesSingleFile-->ProcessFileCollectFiles-->InitCountersInitCounters-->CreateTasksCreateTasks-->ProcessConcurrentProcessConcurrent-->GatherResultsGatherResults-->GenerateReportProcessFile-->ReadFileContentReadFileContent-->CheckHasMapCheckHasMap-->|No|SkipNoMapCheckHasMap-->|Yes|RemoveMapRemoveMap-->GetHashFileGetHashFile-->CheckHashExistsCheckHashExists-->|Yes|RemoveHashCheckHashExists-->|No|UpdateContentRemoveHash-->UpdateContentUpdateContent-->|Yes|WriteCleanedUpdateContent-->|No|UpdateCountersSkipNoMap-->UpdateCountersWriteCleaned-->UpdateCountersUpdateCounters-->EndclassDefbluefill:#3498db,stroke:#2980b9,color:#fffclassDefgreenfill:#006100,stroke:#004d00,color:#fffclassDefredfill:#bb2528,stroke:#7C0000,color:#fffclassDefyellowfill:#F8B229,stroke:#d9a331,color:#000classDefgrayfill:#444,stroke:#222,color:#fffclassStart,EndgrayclassReadConfig,InitCounters,GatherResults,GenerateReportblueclassCheckPath,CheckFile,CheckHasMap,CheckHashExists,UpdateContentyellowclassSingleFile,CollectFiles,CreateTasks,ProcessConcurrent,ProcessFile,ReadFileContent,GetHashFilegreenclassErrorPath,SkipNoMap,RemoveMap,RemoveHash,WriteCleaned,UpdateCountersred```