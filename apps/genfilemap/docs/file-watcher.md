#GenFileMapFileWatcherGuide##IntroductionTheGenFileMapFileWatcherisautilitythatcontinuouslymonitorsyourprojectfilesforchangesandautomaticallyupdatestheirfilemaps.ThiseliminatestheneedtomanuallyruntheGenFileMaptooleachtimeyoumodifyafile,ensuringthatyourfilemapsstaycurrentwithminimaleffort.Keybenefitsofusingthefilewatcherinclude:-**Real-timeUpdates**:Filemapsareupdatedimmediatelyafterfilesaremodified-**AutomaticProcessing**:NoneedtomanuallyinvokeGenFileMapforeachchange-**ImprovedWorkflow**:Seamlesslyintegratefilemapgenerationintoyourdevelopmentprocess-**SelectiveProcessing**:Onlychangedfilesareprocessed,savingtimeandresources-**ContinuousMonitoring**:Keepallfilemapsup-to-dateacrossyourprojectThefilewatcherisparticularlyusefulduringactivedevelopment,whenfilesarefrequentlychangingandAIassistantsneedaccurate,up-to-datefilemapstoprovideeffectiveassistance.##ImplementationOptionsGenFileMapprovidesmultiplefilewatcherimplementationstoaccommodatedifferentusecasesandenvironments:###ShellFileWatcherThe**ShellFileWatcher**(`shell_file_watcher.py`)istherecommendedimplementationformostusers.It:-UsesshellcommandstobypassPythonimportissues-DirectlycallstheGenFileMapCLItoprocessfiles-Providesextensivefilefilteringoptions(include/excludebyextension,minimumfilesize)-EfficientlyfiltersfilesbeforepassingthemtoGenFileMap-Isthemostreliableoptionwhendealingwithpotentialcircularimportissues-HasminimaldependenciesontheGenFileMapcodebase###DirectFileWatcherThe**DirectFileWatcher**(`direct_file_watcher.py`)attemptstouseGenFileMapdirectly:-UsesdirectPythonsubprocesscallstoinvokeGenFileMap-Mayencountercircularimportissuesincertaincases-IsusefulwhendeeperintegrationwithGenFileMapisneeded###RunScriptThe**RunScript**(`run.py`)isahelperutilitythat:-ProvidesacleaninterfaceforexecutingGenFileMapcommands-Handlessubprocessmanagementanderrorreporting-Canbeuseddirectlyorbyotherscripts(likethefilewatchers)-AvoidscircularimportissuesthroughsubprocessisolationChoosetheimplementationthatbestfitsyourproject'sneedsandenvironmentconstraints.##Installation###PrerequisitesBeforeusingthefilewatcher,ensureyouhave:1.InstalledGenFileMap(`pipinstallgenfilemap`)2.Installedrequireddependencies:```bashpipinstallwatchdog```###SetupOptionsThereareseveralwaystosetupthefilewatcher:1.**Usetheprovidedscriptsdirectly**:Thesimplestapproachistousethescriptsdirectlyfromyourprojectroot:```bash#Copythescriptstoyourprojectcp/path/to/genfilemap/shell_file_watcher.py.cp/path/to/genfilemap/run.py.#Makethemexecutablechmod+xshell_file_watcher.pyrun.py```2.**Installsystem-wide**:Forsystem-wideavailability:```bash#CopytoalocationinyourPATHsudocp/path/to/genfilemap/shell_file_watcher.py/usr/local/bin/genfilemap-watchsudochmod+x/usr/local/bin/genfilemap-watch```3.**Usethesetupscript**:Forconvenience,youcanuseourexamplesetupscript:```bash#Downloadthesetupscriptcurl-Ohttps://raw.githubusercontent.com/yourusername/genfilemap/main/docs/examples/setup-file-watcher.sh#Makeitexecutablechmod+xsetup-file-watcher.sh#Runit./setup-file-watcher.sh```Thisscriptwillautomaticallycopythenecessaryfiles,makethemexecutable,andstartthefilewatcherinthebackground.Youcanviewthefullscript[here](./examples/setup-file-watcher.sh).##BasicUsage###StartingtheFileWatcherTostartmonitoringyourprojectfiles:```bashpythonshell_file_watcher.py[directory][options]```Where:-`[directory]`isthepathtowatch(defaultstocurrentdirectory)-`[options]`areadditionalcommand-lineoptions###Command-lineOptionsThefilewatchersupportsthesecommand-lineoptions:|Option|Description||--------------------|------------------------------------------------------------------------||`--recursive`,`-r`|Watchdirectoriesrecursively(recommended)||`--debounceSECONDS`|Setthedebouncedelayinseconds(default:2.0)||`--verbose`,`-v`|Enableverboseloggingfordebugging||`--include`,`-i`|Comma-separatedlistoffileextensionstoinclude(e.g.,'.py,.js,.md')||`--exclude`,`-e`|Comma-separatedlistoffileextensionstoexclude||`--min-size`|Minimumfilesizeinbytestoprocess(default:100)|###ExampleCommands```bash#Watchthecurrentdirectoryrecursivelypythonshell_file_watcher.py.--recursive#Watchaspecificdirectorywithverboseloggingpythonshell_file_watcher.py/path/to/project--recursive--verbose#Watchwithcustomdebouncedelaypythonshell_file_watcher.py.--recursive--debounce1.5#WatchonlyPythonandJavaScriptfilespythonshell_file_watcher.py.--recursive--include=.py,.js#Excludelogandtemporaryfilespythonshell_file_watcher.py.--recursive--exclude=.log,.tmp#Setminimumfilesizeto500bytespythonshell_file_watcher.py.--recursive--min-size=500#Runinthebackgroundandlogoutputtoafilepythonshell_file_watcher.py.--recursive>watcher.log2>&1&```##AdvancedConfiguration###DebounceSettingsThefilewatcherusesdebouncingtopreventexcessiveprocessingoffilesthatchangerapidly.Whenafilechangeisdetected,thewatcherwaitsforthedebounceperiodbeforeprocessingthefiletoensurenoadditionalchangesarepending.Toadjustthedebounceperiod:```bashpythonshell_file_watcher.py.--recursive--debounce5.0```Thissetsa5-seconddebouncedelay,whichisusefulfor:-Filesthatchangefrequentlyinshortbursts-Editorsthatperformincrementalsaves-DevelopmentenvironmentswithhighfileI/Oactivity###FileFilteringThefilewatcherautomaticallyignorescertainfiletypesanddirectories:-Versioncontroldirectories(`.git`,etc.)-Buildartifacts(`__pycache__`,etc.)-Binaryandtemporaryfiles-Hashfiles(`.hash`extension)-Logfiles(`.log`extension)Youcancustomizefilefilteringusingcommand-lineoptions:####IncludeOnlySpecificFileTypes```bashpythonshell_file_watcher.py.--recursive--include=.py,.js,.md```ThiswillonlyprocessPython,JavaScript,andMarkdownfiles,ignoringallotherfiletypes.Ifnotspecified,thewatcherwilluseadefaultlistofcommoncodeanddocumentationfiletypes.####ExcludeSpecificFileTypes```bashpythonshell_file_watcher.py.--recursive--exclude=.log,.tmp,.bak```Thiswillexcludelogfiles,temporaryfiles,andbackupfilesfromprocessing,eveniftheywouldotherwisebeincluded.####MinimumFileSizeFilessmallerthanaspecifiedsizecanbeskipped:```bashpythonshell_file_watcher.py.--recursive--min-size=500```Thisisusefultoskipverysmallfilesthatareunlikelytoneedfilemaps,suchasemptyfilesorsimpleconfigurationfiles.####CombiningFiltersYoucancombinetheseoptionsforprecisecontrol:```bashpythonshell_file_watcher.py.--recursive--include=.py,.js--exclude=.min.js--min-size=200```ThiswillonlyprocessPythonfilesandJavaScriptfiles(exceptforminifiedJSfiles)thatarelargerthan200bytes.###GenFileMapIntegrationThefilewatchernowcallstheactualGenFileMapCLItoprocessfiles,ratherthanjustcreatinghashfiles.ThisensuresthatallofGenFileMap'sfilteringandprocessingrulesarealsoapplied,including:-Minimumlinecountrequirements(default:50lines)-Customignorepatternsfrom`.fileignore`-Template-specificprocessingrulesThistwo-stagefilteringapproach(filewatcherfiltersfirst,thenGenFileMapfilters)providesefficientandconsistentprocessingoffiles.###LogManagementForlong-runningfilewatchersessions,it'srecommendedtoredirectoutputtoalogfile:```bashpythonshell_file_watcher.py.--recursive>watcher.log2>&1&```Youcanthenmonitorthelogfileusing:```bashtail-fwatcher.log#orgrep"error"watcher.log```##Troubleshooting###CircularImportIssuesIfyouencountercircularimporterrorslike:```ImportError:cannotimportname'get_api_key'frompartiallyinitializedmodule'genfilemap.core'(mostlikelyduetoacircularimport)```Solutions:1.**UsetheShellFileWatcher**:The`shell_file_watcher.py`scriptisspecificallydesignedtoavoidcircularimportissuesbyusingsimpleshellcommands.2.**CheckYourPythonPath**:EnsurethattheGenFileMappackageisproperlyinstalledandaccessible.3.**IsolateGenFileMapCalls**:Usethe`run.py`scripttoisolateGenFileMapoperationsinseparateprocesses.###PerformanceIssuesIfyounoticehighCPUusageorslowperformance:1.**IncreasetheDebounceDelay**:Alongerdebounceperiodreducesprocessingfrequency.```bashpythonshell_file_watcher.py.--recursive--debounce5.0```2.**LimittheWatchScope**:Watchonlyspecificdirectoriesratherthantheentireproject.```bashpythonshell_file_watcher.py./src/main```3.**CheckLogOutput**:Useverbosemodetoidentifyproblematicfilesorpatterns.```bashpythonshell_file_watcher.py.--recursive--verbose```###ProcessManagementIfthefilewatcherdoesn'trespondasexpected:1.**Checkifit'srunning**:```bashpsaux|grepfile_watcher```2.**Stopthewatcher**:```bashpkill-fshell_file_watcher.py```3.**Restartwithlogging**:```bashpythonshell_file_watcher.py.--recursive--verbose>watcher.log2>&1&```4.**Usetheresetscript**:Forconvenience,weprovidea[resetscript](./examples/reset-watcher.sh)thatstopsanyrunningwatchers,cleansuplogfiles,andrestartsthewatcher:```bash#Downloadtheresetscriptcurl-Ohttps://raw.githubusercontent.com/yourusername/genfilemap/main/docs/examples/reset-watcher.sh#Makeitexecutablechmod+xreset-watcher.sh#Runit./reset-watcher.sh```##ArchitectureThefilewatcherconsistsofseveralkeycomponents:###EventDetectionSystemThefilewatcherusesthe**watchdog**librarytodetectfilesystemevents:-**Observer**:Monitorsthefilesystemforchanges-**FileSystemEventHandler**:Processesevents(created,modified,deleted,moved)-**EventFiltering**:Ignoresspecifiedfiletypesanddirectories###EventProcessingPipelineWhenafilechangeisdetected:1.**EventDetection**:Watchdogdetectsafilesystemevent2.**Debouncing**:Theeventisheldforthedebounceperiod3.**Filtering**:Thefileischeckedagainstignorepatterns4.**Processing**:ThefilemapisupdatedusingGenFileMap5.**Logging**:Resultsareloggedformonitoring###FileMapUpdateProcessDependingontheimplementation:-**ShellFileWatcher**:CallsGenFileMapCLIthroughsubprocesstoupdatefilemaps-**DirectFileWatcher**:UsessubprocesstocallGenFileMapdirectly-**RunScript**:ProvidesacleaninterfacetoGenFileMapfunctions###ComponentDiagram```+-------------++---------------++-------------------+|Watchdog|---->|EventHandler|---->|DebounceManager||Observer|||||+-------------++---------------++-------------------+|v+-------------++---------------++-------------------+|FileFilter|<----|FileWatcher|---->|GenFileMapCLI||System||Manager||Process|+-------------++---------------++-------------------+|||v|+---------------++------------>|Filtering||Options|+---------------+|v+---------------+|Loggingand||Reporting|+---------------+```TheenhancedFileFilterSystemnowincludes:-Extension-basedfiltering(include/exclude)-Minimumfilesizerequirements-Standardignorepatterns-Two-stagefiltering(filewatcherfirst,thenGenFileMap)##Integration###DevelopmentWorkflowsThefilewatchercanbeintegratedintovariousdevelopmentworkflows:1.**IDEIntegration**:StartthewatcherwhenopeningyourprojectinyourIDE2.**CI/CDPipelines**:Ensurefilemapsareup-to-datebeforedeployment3.**GitHooks**:Updatefilemapsonpullormergeoperations###EditorIntegrationForVSCode,youcanaddataskin`.vscode/tasks.json`:```json{"version":"2.0.0","tasks":[{"label":"StartGenFileMapWatcher","type":"shell","command":"pythonshell_file_watcher.py.--recursive","isBackground":true,"problemMatcher":[]}]}```ForamorecomprehensiveVSCodeintegration,seeour[exampletasks.json](./examples/vscode-tasks.json)whichincludesadditionaltasksforstoppingandcheckingthewatcherstatus.YoucansetupVSCodetoautomaticallystartthefilewatcherwhenyouopenyourprojectbysettingthe`runOn`optionto`folderOpen`inthetaskconfiguration.###AutomatingStartupYoucanautomatethefilewatcherstartupinyourproject:1.**Makefiletarget**:```makefilewatch:pythonshell_file_watcher.py.--recursive```2.**npmscript**(forJavaScript/TypeScriptprojects):```json"scripts":{"watch-filemaps":"pythonshell_file_watcher.py.--recursive"}```3.**Project-specificactivationscript**:```bash#!/bin/bash#start-dev-environment.shsourcevenv/bin/activatepythonshell_file_watcher.py.--recursive>logs/watcher.log2>&1&echo"GenFileMapwatcherstarted.PID:$!"```##FrequentlyAskedQuestionsForanswerstocommonquestionsaboutthefilewatcher,seeour[FileWatcherFAQ](./examples/file-watcher-faq.md).