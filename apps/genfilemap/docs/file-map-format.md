#GenFileMapFormatSpecification##IntroductionFilemapsareJSONstructuresembeddedascommentsatthetopoffilesthatprovidemetadata,structureinformation,andnavigationpointsforAIsystems.TheyserveasastandardizedwaytohelpAItoolsbetterunderstandandnavigatecodeanddocumentationfiles.Thepurposeofafilemapisto:1.Providemetadataaboutthefile'spurpose,type,andcontent2.Definethelogicalstructureofthefilethroughsections3.Identifykeyelementsandimportantpoints4.GiveexplicitinstructionstoAIsystemsforprocessingthefile5.EnableefficientnavigationwithoutrequiringfullfileanalysisThisspecificationdetailsthestructure,components,andimplementationrequirementsforfilemaps.##FileMapStructureAfilemapisaJSONobjectwiththefollowingtop-levelcomponents:```json{"file_metadata":{...},//Informationaboutthefile"ai_instructions":"...",//SpecialinstructionsforAIprocessing"sections":[...],//Filesectionswithlinenumbers"key_elements":[...]//Importantindividualelements}```Allfilemapsmustincludeatleastthe`file_metadata`and`sections`components.The`ai_instructions`and`key_elements`componentsareoptionalbutrecommendedformoreeffectiveAIinteraction.##EmbeddinginFilesFilemapsareembeddedascommentsatthetopoffilesusingappropriatecommentstyleforthefiletype,enclosedbetween`FILE_MAP_BEGIN`and`FILE_MAP_END`markers.###GeneralPattern```<comment_start>FILE_MAP_BEGIN<block_comment_start>{"file_metadata":{...},"sections":[...],...}<block_comment_end><comment_start>FILE_MAP_END```###PythonExample```pythonfrom__future__importannotationsfrom__future__importabsolute_import#RestofthePythoncodedefexample_function():pass```ThisformatensuresPythonfileswithfilemapscanbeexecutedwithoutsyntaxerrors.##FileMetadataThe`file_metadata`objectcontainsgeneralinformationaboutthefile.Allfieldsareoptional,butawell-formedfilemapshouldincludeatleast`title`and`description`.```json"file_metadata":{"title":"ModuleNameorFilePurpose","description":"Detaileddescriptionofthefile'spurposeandcontents","last_updated":"YYYY-MM-DD","type":"code|documentation|configuration|other","authors":["AuthorName"],"version":"1.0.0","dependencies":["other/file/path.py","another/dependency.js"],"tags":["tag1","tag2"]}```|Field|Type|Description|Example||--------------|------|--------------------------------------------|------------------------------------------------------||`title`|string|Brieftitleornameofthefile|`"UserAuthenticationModule"`||`description`|string|Detaileddescriptionofthefile'spurpose|`"Handlesuserauthenticationandsessionmanagement"`||`last_updated`|string|Dateoflastupdate(ISOformatrecommended)|`"2023-07-01"`||`type`|string|Thetypeoffile(code,documentation,etc.)|`"code"`||`authors`|array|Listofauthorsorcontributors|`["JaneSmith","JohnDoe"]`||`version`|string|Versionofthefile|`"1.2.3"`||`dependencies`|array|Filesthisfiledependson|`["auth/utils.py"]`||`tags`|array|Categorizationtags|`["authentication","security"]`|##AIInstructionsThe`ai_instructions`fieldprovidesspecificinstructionstoAIsystemsabouthowtoprocessorinterpretthefile.Thisisafree-formstringthatshouldbeclearanddirective.```json"ai_instructions":"Whenreadingthisfile,identifythesectionyouneedandusetheread_filetooltoreadthespecificlinerangeindicated.DONOTproceedwithoutreadingtherelevantsections."```Typicalinstructionsinclude:-Howtonavigatethefileefficiently-Whichsectionstoprioritize-Howtohandlelargefiles-Specialconsiderationsforthespecificfiletype-Whentouseline-specifictools##SectionsThe`sections`arraydefinesthelogicalstructureofthefile,breakingitintonamedcomponentswithlineranges.```json"sections":[{"name":"Imports","description":"Packageandmoduleimports","line_start":10,"line_end":20},{"name":"ClassDefinition","description":"Mainclassimplementation","line_start":22,"line_end":150}]```Eachsectionobjecthasthefollowingfields:|Field|Type|Required|Description||-------------|-------|--------|---------------------------------------------||`name`|string|Yes|Briefnameofthesection||`description`|string|Yes|Detaileddescriptionofthesection'spurpose||`line_start`|integer|Yes|Startinglinenumber(1-indexed)||`line_end`|integer|Yes|Endinglinenumber(1-indexed,inclusive)|Sectionsshould:-Coverallsignificantpartsofthefile-Notoverlapwitheachother-Usedescriptivenamesthatreflectthecontent-Typicallyinclude5-15sectionsforamedium-sizedfile##KeyElementsThe`key_elements`arrayidentifiesspecificimportantpointswithinthefilethatdon'twarrantafullsectionbutaresignificantforunderstandingornavigation.```json"key_elements":[{"name":"authenticate_userfunction","description":"Coreauthenticationfunctionthatverifiescredentials","line":45},{"name":"PASSWORD_MIN_LENGTH","description":"Constantdefiningminimumpasswordlength","line":12}]```Eachkeyelementobjecthasthefollowingfields:|Field|Type|Required|Description||-------------|-------|--------|----------------------------------------------------||`name`|string|Yes|Nameoftheelement(function,variable,etc.)||`description`|string|Yes|Descriptionoftheelement'spurpose||`line`|integer|Yes|Linenumberwheretheelementisdefined(1-indexed)|Keyelementsshouldidentify:-Importantfunctionsormethods-Significantconstantsorconfigurationvalues-Criticalclassproperties-Importantdatastructuresorschemas-EntrypointsorpublicAPImethods##JSONSchemaThefollowingJSONschemaformallydefinesthefilemapstructure:```json{"$schema":"http://json-schema.org/draft-07/schema#","type":"object","required":["file_metadata","sections"],"properties":{"file_metadata":{"type":"object","properties":{"title":{"type":"string"},"description":{"type":"string"},"last_updated":{"type":"string"},"type":{"type":"string"},"authors":{"type":"array","items":{"type":"string"}},"version":{"type":"string"},"dependencies":{"type":"array","items":{"type":"string"}},"tags":{"type":"array","items":{"type":"string"}}},"required":["title","description"]},"ai_instructions":{"type":"string"},"sections":{"type":"array","items":{"type":"object","required":["name","description","line_start","line_end"],"properties":{"name":{"type":"string"},"description":{"type":"string"},"line_start":{"type":"integer","minimum":1},"line_end":{"type":"integer","minimum":1}}},"minItems":1},"key_elements":{"type":"array","items":{"type":"object","required":["name","description","line"],"properties":{"name":{"type":"string"},"description":{"type":"string"},"line":{"type":"integer","minimum":1}}}},"code_elements":{"type":"object","properties":{"functions":{"type":"array","items":{"type":"object","required":["name","signature","line"],"properties":{"name":{"type":"string"},"signature":{"type":"string"},"line":{"type":"integer","minimum":1},"return_type":{"type":"string"},"description":{"type":"string"},"parameters":{"type":"array","items":{"type":"object","required":["name","type"],"properties":{"name":{"type":"string"},"type":{"type":"string"},"description":{"type":"string"},"default":{"type":"string"}}}}}}},"classes":{"type":"array","items":{"type":"object","required":["name","line"],"properties":{"name":{"type":"string"},"line":{"type":"integer","minimum":1},"inherits_from":{"type":"array","items":{"type":"string"}},"description":{"type":"string"},"methods":{"type":"array","items":{"type":"object","required":["name","signature","line"],"properties":{"name":{"type":"string"},"signature":{"type":"string"},"line":{"type":"integer","minimum":1},"return_type":{"type":"string"},"description":{"type":"string"},"parameters":{"type":"array","items":{"type":"object","required":["name","type"],"properties":{"name":{"type":"string"},"type":{"type":"string"},"description":{"type":"string"},"default":{"type":"string"}}}}}}},"properties":{"type":"array","items":{"type":"object","required":["name","line"],"properties":{"name":{"type":"string"},"line":{"type":"integer","minimum":1},"type":{"type":"string"},"description":{"type":"string"}}}}}}},"imports":{"type":"array","items":{"type":"object","required":["statement","line"],"properties":{"statement":{"type":"string"},"line":{"type":"integer","minimum":1}}}},"constants":{"type":"array","items":{"type":"object","required":["name","line"],"properties":{"name":{"type":"string"},"line":{"type":"integer","minimum":1},"value":{"type":"string"},"type":{"type":"string"},"description":{"type":"string"}}}}}}}}```GenFileMapvalidatesallgeneratedfilemapsagainstthisschematoensureconsistencyandcorrectness.##BestPracticesForthemosteffectivefilemaps,followthesebestpractices:1.**ClearSectionNames**:Usedescriptive,consistentsectionnamesthatclearlyindicatecontent2.**AccurateLineNumbers**:Ensurelinenumbersarepreciseandupdatedwhenfilechanges3.**ComprehensiveCoverage**:Includeallsignificantpartsofthefileinsections4.**GranularSections**:Keepsectionsreasonablysized(typicallyunder100lines)5.**DescriptiveMetadata**:Providedetailedfiledescriptionsandaccuratetypeinformation6.**ExplicitAIInstructions**:IncludeclearinstructionsforhowAIshouldprocessthefile7.**KeyNavigationPoints**:Identifythemostimportantelementsthatwillbefrequentlyreferenced8.**UpdateRegularly**:Regeneratefilemapswhensubstantialchangesaremadetofiles9.**ConsistentStyle**:Maintainconsistentformattingandnamingconventionsacrossfilemaps10.**MinimalOverlap**:AvoidoverlappingsectionsorredundantkeyelementsRememberthatfilemapsareprimarilyforAIconsumption,sooptimizeforclarityandnavigabilityratherthanhumanreadability.##ExampleFileMaps###PythonExample```python```###MarkdownExample```markdown```##CodeElementsThe`code_elements`objectprovidesdetailedinformationaboutcodeconstructsspecificallydesignedtoassisttestgenerationandAPIdocumentation.Thiscomponentisonlyapplicabletocodefiles(suchasPython,JavaScript,TypeScript,etc.)andcontainsfourmaincategories:```json"code_elements":{"functions":[...],"classes":[...],"imports":[...],"constants":[...]}```###FunctionsThe`functions`arraycontainsdetailedinformationabouteachfunctioninthefile:```json"functions":[{"name":"calculate_total","signature":"calculate_total(items:List[Item],tax_rate:float=0.0)->float","line":45,"return_type":"float","description":"Calculatesthetotalcostofitemsincludingtax","parameters":[{"name":"items","type":"List[Item]","description":"Listofitemstocalculatetotalfor"},{"name":"tax_rate","type":"float","description":"Thetaxratetoapply","default":"0.0"}]}]```Eachfunctionentryincludes:|Field|Type|Required|Description||-------------|-------|--------|-------------------------------------------------||`name`|string|Yes|Functionname||`signature`|string|Yes|Completefunctionsignature||`line`|integer|Yes|Linenumberwherefunctionisdefined||`return_type`|string|No|Returntypeofthefunction||`description`|string|No|Briefdescriptionofwhatthefunctiondoes||`parameters`|array|No|Arrayofparameterobjectswithdetailedmetadata|###ClassesThe`classes`arraycontainsdetailedinformationabouteachclass:```json"classes":[{"name":"ShoppingCart","line":78,"inherits_from":["BaseCart","Serializable"],"description":"Representsashoppingcartwithitemsandcalculationmethods","methods":[...],"properties":[...]}]```Eachclassentryincludes:|Field|Type|Required|Description||---------------|-------|--------|----------------------------------------------||`name`|string|Yes|Classname||`line`|integer|Yes|Linenumberwhereclassisdefined||`inherits_from`|array|No|Arrayofparentclassnames||`description`|string|No|Briefdescriptionoftheclass||`methods`|array|No|Arrayofmethodobjects(similartofunctions)||`properties`|array|No|Arrayofpropertyobjects|###ImportsandConstantsThe`imports`and`constants`arraysprovideinformationaboutmoduleimportsandconstantdefinitions:```json"imports":[{"statement":"fromtypingimportList,Dict,Optional","line":12}],"constants":[{"name":"DEFAULT_TAX_RATE","line":25,"value":"0.08","type":"float","description":"Defaultsalestaxrateifnonespecified"}]```Thisdetailedcodestructureinformationisinvaluablefor:1.Testgeneration-Providesexactfunctionsignatures,parametertypes,andreturnvalues2.APIdocumentation-Offerscomprehensivemetadataforallpublicinterfaces3.Codenavigation-Enablesquicklocationofspecificimplementationdetails4.Dependencymapping-ShowsimportrelationshipsbetweenmodulesWhengeneratingfilemapsforcodefiles,it'shighlyrecommendedtoincludethe`code_elements`componenttoenabletheseadvancedcapabilities.