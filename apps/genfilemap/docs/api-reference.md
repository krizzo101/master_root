#GenFileMapAPIReference##IntroductionGenFileMapcanbeusedasaPythonlibrary,allowingyoutointegratefilemapgenerationintoyourownapplications,tools,orworkflows.ThisAPIreferenceprovidescomprehensivedocumentationofthepublicAPIs,classes,andfunctionsavailableintheGenFileMappackage.TheAPIisdesignedtobe:-**Modular**:Useonlythecomponentsyouneed-**Extensible**:CreatecustomprocessorsorAPIclients-**Async-ready**:Supportforasynchronousprocessing-**Configurable**:SameflexibleconfigurationastheCLItoolThisreferenceisintendedfordeveloperswhowanttoincorporateGenFileMapfunctionalityintotheirownPythonapplicationsorbuildextensionstothecorefunctionality.##InstallationTouseGenFileMapasalibrary,installitusingpip:```bashpipinstallgenfilemap```Thenimportthecomponentsyouneed:```pythonfromgenfilemapimportupdate_file_with_map,process_files_async,generate_project_mapfromgenfilemap.configimportload_config,get_config_value```##CoreFunctionsThecoremoduleprovidesthemainfunctionalityofGenFileMap.###update_file_with_map```pythonasyncdefupdate_file_with_map(file_path:str,api_client,model:str,template:Optional[str]=None,dry_run:bool=False,min_lines:int=0,force:bool=False)->bool```Updatesafilewithageneratedfilemap.Thisfunctionreadsthefile,generatesafilemapusingtheappropriateprocessor,andwritestheupdatedcontentbacktothefile.**Parameters:**-`file_path`:Pathtothefiletoupdate-`api_client`:APIclientinstancefrom`create_api_client`-`model`:Nameofthemodeltouse(e.g.,"gpt-4.1-mini","claude-3-opus-20240229")-`template`:(Optional)Customtemplatenametouse-`dry_run`:IfTrue,showchangeswithoutwritingtofiles-`min_lines`:Minimumnumberoflinesafilemusthavetogenerateafilemap-`force`:IfTrue,generateanewfilemapevenifthefilecontenthasn'tchanged**Returns:**-`bool`:Trueifthefilewasupdatedorwouldbeupdated(dryrun),Falseotherwise**Example**:```pythonfromgenfilemapimportupdate_file_with_mapfromgenfilemap.apiimportcreate_api_clientapi_client=create_api_client("openai",api_key="your-api-key")result=awaitupdate_file_with_map("path/to/file.py",api_client,"gpt-4.1-mini")```###process_files_async```pythonasyncdefprocess_files_async(config:Config)->bool```Processesmultiplefilesasynchronouslyaccordingtotheprovidedconfiguration.**Parameters:**-`config`:Configurationobjectcontaining:-`path`:Pathtofileordirectorytoprocess-`recursive`:Whethertoprocessdirectoriesrecursively-`file_processing.include_extensions`:Listoffileextensionstoinclude-`file_processing.exclude_extensions`:Listoffileextensionstoexclude-`file_processing.min_lines`:Minimumnumberoflinesafilemusthave-`api.vendor`:APIvendortouse-`api.model`:Modeltouse-`output.template`:Templatetouse-`dry_run`:IfTrue,showchangeswithoutwritingtofiles-`force`:IfTrue,generatenewfilemapsevenifcontenthasn'tchanged-`concurrency`:Maximumnumberofconcurrentfilestoprocess-`ignore_file`:Pathtogitignore-stylefilewithpatternstoignore**Returns:**-`bool`:Trueifallfileswereprocessedsuccessfully,Falseotherwise**Example**:```pythonimportasynciofromgenfilemapimportprocess_files_asyncfromgenfilemap.configimportload_config,get_config_value#Loadconfigurationconfig=load_config()#Processfilesusingtheprocessordirectlyfromgenfilemap.processorsimportget_processor_for_filefile_path="example.py"processor=get_processor_for_file(file_path)#Youcanusetheprocessortoanalyzestructureandgeneratemapsstructure=awaitprocessor.analyze_structure(content)file_map=awaitprocessor.generate_file_map(content,comment_style)```###generate_project_map```pythondefgenerate_project_map(config:Config)->Optional[str]```Generatesaproject-levelmapthatprovidesanoverviewofallprocessedfiles.**Parameters**:-`config`(Config):Configurationobject**Returns**:-`Optional[str]`:Pathtothegeneratedprojectmap,orNoneifnotgenerated**Example**:```pythonfromgenfilemapimportgenerate_project_mapfromgenfilemap.configimportload_config,get_config_value#Loadconfigurationconfig=load_config()#Updateconfigurationforprojectmapgenerationconfig["project_map"]=Trueconfig["project_map_out"]="project_map.md"config["path"]="path/to/directory"project_map_path=generate_project_map(config)```###clean_files_async```pythonasyncdefclean_files_async(config:Config)->bool```Removesfilemapsandhashfilesfrommultiplefilesaccordingtotheprovidedconfiguration.**Parameters:**-`config`:Configurationobjectcontaining:-`path`:Pathtofileordirectorytoclean-`recursive`:Whethertoprocessdirectoriesrecursively-`file_processing.include_extensions`:Listoffileextensionstoinclude-`file_processing.exclude_extensions`:Listoffileextensionstoexclude-`concurrency`:Maximumnumberofconcurrentfilestoprocess-`dry_run`:IfTrue,showchangeswithoutwritingtofiles-`ignore_file`:Pathtogitignore-stylefilewithpatternstoignore**Returns:**-`bool`:Trueifallfileswereprocessedsuccessfully,Falseotherwise**Example**:```pythonfromgenfilemapimportclean_files_asyncfromgenfilemap.configimportload_config,get_config_value#Loadconfigurationconfig=load_config()#Updateconfigurationforcleaningfilesconfig["path"]="path/to/directory"config["recursive"]=Trueconfig["dry_run"]=Falsesuccess=awaitclean_files_async(config)print("Cleaningcompletedsuccessfully"ifsuccesselse"Cleaninghaderrors")```###clean_file_maps```pythonasyncdefclean_file_maps(file_path:Union[str,Path],dry_run:bool=False)->Tuple[bool,str,Optional[str]]```Removesafilemapanditscorrespondinghashfilefromasinglefile.**Parameters:**-`file_path`:Pathtothefiletoclean-`dry_run`:IfTrue,showchangeswithoutwritingtofiles**Returns:**-`Tuple[bool,str,Optional[str]]`:Atuplecontaining:-Successstatus(bool)-Statusmessage(str):"cleaned","would_clean","skipped",or"error"-Errormessageifany(Optional[str])**Example**:```pythonfromgenfilemap.coreimportclean_file_mapsfrompathlibimportPathsuccess,status,error=awaitclean_file_maps("path/to/file.py")ifsuccess:print(f"Filecleanedwithstatus:{status}")else:print(f"Failedtocleanfile:{error}")```##ConfigurationGenFileMapprovidesfunctionsforloadingandmanagingconfigurationsettings.###load_config```pythondefload_config(config_path:Optional[str]=None)->Dict[str,Any]:```Loadsconfigurationfromafile.**Parameters:**-`config_path`:Pathtoconfigfile,ifNoneusesdefault**Returns:**-Configurationdictionary**Example:**```pythonfromgenfilemap.configimportload_config,get_config_value#Loadconfigurationconfig=load_config()#Getaspecificconfigurationvalueapi_model=get_config_value(config,"api.model")concurrency=get_config_value(config,"performance.concurrency",5)#Defaultifnotset```###get_config_value```pythondefget_config_value(config:Dict[str,Any],key_path:str,default=None)->Any:```Getsavaluefromtheconfigusingdotnotation.**Parameters:**-`config`:Configurationdictionary-`key_path`:Pathtothekey,usingdotnotation(e.g.,"api.model")-`default`:Defaultvaluetoreturnifkeynotfound**Returns:**-Thevalueatthespecifiedpath,ordefaultifnotfound###save_config```pythondefsave_config(config:Dict[str,Any],config_path:Optional[str]=None)->bool:```Savesconfigurationtoafile.**Parameters:**-`config`:Configurationdictionary-`config_path`:Pathtosaveconfig,ifNoneusesdefault**Returns:**-Trueifsuccessful,Falseotherwise###generate_default_config```pythondefgenerate_default_config(config_path:Optional[str]=None)->bool:```Generatesadefaultconfigurationfile.**Parameters:**-`config_path`:Pathtosaveconfig,ifNoneusesdefault**Returns:**-Trueifsuccessful,Falseotherwise**Example:**```pythonfromgenfilemap.configimportgenerate_default_config#Generateadefaultconfigurationfilegenerate_default_config("./default_config.json")```##APIClientsAPIclientshandlecommunicationwithlanguagemodelproviders.###create_api_client```pythondefcreate_api_client(vendor:str,api_key:str)->APIClient```CreatesanAPIclientforthespecifiedvendor.**Parameters**:-`vendor`(str):APIvendorname(e.g.,"openai")-`api_key`(str):APIkeyforthevendor**Returns**:-`APIClient`:APIclientinstance**Example**:```pythonfromgenfilemap.apiimportcreate_api_client,get_api_keyfromgenfilemap.configimportload_config,get_config_value#Loadconfigurationconfig=load_config()#GetAPIkeyapi_key=get_api_key(config)#CreateAPIclientclient=awaitcreate_api_client(api_key,vendor="openai")```###APIClientBaseClass```pythonclassAPIClient:def__init__(self,api_key:str)asyncdefgenerate_completion(self,system_message:str,user_message:str,model:str,max_tokens:int=None)->str```**Methods**:-`__init__(api_key)`:InitializewithAPIkey-`generate_completion(system_message,user_message,model,max_tokens)`:Generatecompletion**ExampleforextendingwithcustomAPIclient**:```pythonfromgenfilemap.api.baseimportAPIClientclassCustomAPIClient(APIClient):def__init__(self,api_key:str):super().__init__(api_key)#Custominitializationasyncdefgenerate_completion(self,system_message:str,user_message:str,model:str,max_tokens:int=None)->str:#Customimplementationpass```##FileProcessorsFileprocessorsanalyzeandgeneratemapsfordifferentfiletypes.###get_processor_for_file```pythondefget_processor_for_file(file_path:str,api_client:APIClient,model:str)->FileProcessor```Getstheappropriateprocessorforafilebasedonitstype.**Parameters**:-`file_path`(str):Pathtothefile-`api_client`(APIClient):APIclientinstance-`model`(str):Modelnametouse**Returns**:-`FileProcessor`:Fileprocessorinstance**Example**:```pythonfromgenfilemap.processorsimportget_processor_for_filefromgenfilemap.apiimportcreate_api_clientapi_client=create_api_client("openai",api_key="your-api-key")processor=get_processor_for_file("path/to/file.py",api_client,"gpt-4.1-mini")#Usetheprocessorcontent=open("path/to/file.py").read()file_map=awaitprocessor.generate_file_map(content,comment_style=("#","\"\"\"","\"\"\""))```###FileProcessorBaseClass```pythonclassFileProcessor:def__init__(self,file_path:str,api_client:APIClient,model:str)asyncdefanalyze_structure(self,content:str)->Dict[str,Any]asyncdefgenerate_file_map(self,content:str,comment_style:Tuple[str,str,str])->Optional[str]asyncdefvalidate_generated_map(self,file_map_json:str,content:str)->bool```**Methods**:-`__init__(file_path,api_client,model)`:Initializeprocessor-`analyze_structure(content)`:Analyzefilestructure-`generate_file_map(content,comment_style)`:Generatefilemap-`validate_generated_map(file_map_json,content)`:Validategeneratedmap**Exampleforcreatingacustomprocessor**:```pythonfromgenfilemap.processors.baseimportFileProcessorclassCustomProcessor(FileProcessor):asyncdefanalyze_structure(self,content:str)->Dict[str,Any]:#Customstructureanalysisreturn{"sections":[...],"key_elements":[...]}```##UtilitiesGenFileMapprovidesvariousutilityfunctionsforfileoperationsandtemplatehandling.###FileUtilities```python#Fromgenfilemap.utils.file_utilsdefget_comment_style(file_path:str)->Tuple[str,str,str]defextract_existing_file_map(content:str)->Optional[str]defshould_ignore_file(file_path:str,ignore_patterns:List[str])->booldefload_ignore_patterns(ignore_file:str)->List[str]defget_file_type(file_path:str)->strdefcalculate_file_hash(content:str)->str```**Example**:```pythonfromgenfilemap.utils.file_utilsimportget_comment_style,extract_existing_file_mapfromgenfilemap.configimportload_config,get_config_value#Loadconfigurationconfig=load_config()#Getcommentstyleforafilecomment_style=get_comment_style("example.py")#Returns(block_start,block_end,line_prefix)#Extractexistingfilemapwithopen("example.py","r")asf:content=f.read()existing_map=extract_existing_file_map(content,comment_style)```###TemplateUtilities```python#Fromgenfilemap.utils.template_utilsdefload_template(template_path:Optional[str],template_dir:Optional[str])->Optional[str]defapply_template(template:str,file_map_data:Dict[str,Any])->str```**Example**:```pythonfromgenfilemap.utils.template_utilsimportload_template,apply_template#Loadatemplatetemplate=load_template("custom_template.json","./templates")#Applytemplatetodatafile_map_data={"file_metadata":{...},"sections":[...],"key_elements":[...]}formatted_map=apply_template(template,file_map_data)```##CompleteExamples###BasicExample:ProcessaSingleFile```pythonimportasynciofromgenfilemapimportupdate_file_with_mapfromgenfilemap.apiimportcreate_api_client,get_api_keyfromgenfilemap.configimportload_config,get_config_valueasyncdefprocess_single_file():#Loadconfigurationconfig=load_config()#GetAPIkeyapi_key=get_api_key(config)#CreateAPIclientclient=awaitcreate_api_client(api_key)#Processasinglefilemodel=get_config_value(config,"api.model","gpt-4.1-mini")result=awaitupdate_file_with_map("path/to/file.py",client,model=model,force=True)print(f"Fileprocessed:{result}")#Runtheasyncfunctionasyncio.run(process_single_file())```###AdvancedExample:CustomProcessingPipeline```pythonimportasyncioimportosfromtypingimportListfromgenfilemap.configimportload_config,get_config_valuefromgenfilemap.apiimportcreate_api_clientfromgenfilemap.processorsimportget_processor_for_filefromgenfilemap.utils.file_utilsimportget_comment_style,extract_existing_file_mapasyncdefcustom_processing_pipeline(file_paths:List[str]):#CreateconfigurationandAPIclientconfig=load_config()api_key=os.environ.get("OPENAI_API_KEY")api_client=create_api_client("openai",api_key)model=get_config_value(config,"api.model","gpt-4.1-mini")#Processeachfileresults=[]forfile_pathinfile_paths:try:#Getappropriateprocessorprocessor=get_processor_for_file(file_path,api_client,model)#Readfilecontentwithopen(file_path,'r',encoding='utf-8')asf:content=f.read()#Getcommentstyleforthefilecomment_style=get_comment_style(file_path)#Generatefilemapfile_map=awaitprocessor.generate_file_map(content,comment_style)#Custompost-processing(example)iffile_map:#Addcustompropertiesimportjsonfile_map_data=json.loads(file_map)file_map_data["custom_property"]="customvalue"file_map=json.dumps(file_map_data,indent=2)#Updatefile(simpleapproach)withopen(file_path,'w',encoding='utf-8')asf:f.write(f"#FILE_MAP_BEGIN\n\"\"\"\n{file_map}\n\"\"\"\n#FILE_MAP_END\n\n{content}")results.append({"file":file_path,"status":"updated"})else:results.append({"file":file_path,"status":"skipped"})exceptExceptionase:results.append({"file":file_path,"status":"error","error":str(e)})returnresults#Exampleusagefile_paths=["file1.py","file2.js","file3.md"]results=asyncio.run(custom_processing_pipeline(file_paths))print(results)```